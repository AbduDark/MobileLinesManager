<Window x:Class="MobileLinesManager.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MobileLinesManager"
        xmlns:vm="clr-namespace:MobileLinesManager.ViewModels"
        xmlns:views="clr-namespace:MobileLinesManager.Views"
        xmlns:viewmodels="clr-namespace:MobileLinesManager.ViewModels"
        mc:Ignorable="d"
        Title="إدارة خطوط الموبايل" 
        Height="768" 
        Width="1280"
        WindowStartupLocation="CenterScreen"
        FlowDirection="RightToLeft"
        Language="ar-SA">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources/Converters.xaml"/>
                <ResourceDictionary Source="Resources/Styles.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <!-- ViewModels -->
            <vm:MainViewModel x:Key="MainVM"/>
            <viewmodels:ReportsViewModel x:Key="ReportsVM"/>

            <!-- Views -->
            <views:DashboardView x:Key="DashboardView"/>
            <views:LinesView x:Key="LinesView"/>
            <views:GroupsView x:Key="GroupsView"/>
            <views:AssignmentsView x:Key="AssignmentsView"/>
            <views:ReportsView x:Key="ReportsView" DataContext="{Binding Source={StaticResource ReportsVM}}"/>

            <viewmodels:AuditTrailViewModel x:Key="AuditTrailVM"/>
            <views:AuditTrailView x:Key="AuditTrailView" DataContext="{Binding Source={StaticResource AuditTrailVM}}"/>

            <viewmodels:SettingsViewModel x:Key="SettingsVM"/>
            <views:SettingsView x:Key="SettingsView" DataContext="{Binding Source={StaticResource SettingsVM}}"/>
        </ResourceDictionary>
    </Window.Resources>

    <Grid DataContext="{Binding Source={StaticResource MainVM}}">
        <Grid.RowDefinitions>
            <RowDefinition Height="60"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Grid.ColumnSpan="2" Background="#0078D4">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="إدارة خطوط الموبايل" 
                          FontSize="24" 
                          FontWeight="Bold" 
                          Foreground="White" 
                          VerticalAlignment="Center" 
                          HorizontalAlignment="Center"
                          Grid.Column="0"/>

                <!-- Operator Logos -->
                <StackPanel Orientation="Horizontal" 
                           HorizontalAlignment="Center" 
                           VerticalAlignment="Center"
                           Grid.Column="1"
                           Margin="20,0">
                    <Image Source="Resources/Images/vodafone_logo.png" 
                          Width="40" 
                          Height="40" 
                          Margin="5"/>
                    <Image Source="Resources/Images/etisalat_logo.png" 
                          Width="40" 
                          Height="40" 
                          Margin="5"/>
                    <Image Source="Resources/Images/we_logo.png" 
                          Width="40" 
                          Height="40" 
                          Margin="5"/>
                    <Image Source="Resources/Images/orange_logo.png" 
                          Width="40" 
                          Height="40" 
                          Margin="5"/>
                </StackPanel>

                <!-- Alerts -->
                <StackPanel Orientation="Horizontal" 
                           HorizontalAlignment="Left" 
                           VerticalAlignment="Center"
                           Grid.Column="2"
                           Margin="20,0">
                    <TextBlock Text="التنبيهات:" 
                              Foreground="White" 
                              FontSize="14" 
                              VerticalAlignment="Center" 
                              Margin="0,0,10,0"/>
                    <Border Background="#E74856" 
                           CornerRadius="12" 
                           Padding="8,4" 
                           MinWidth="30">
                        <TextBlock Text="{Binding AlertCount}" 
                                  Foreground="White" 
                                  FontWeight="Bold" 
                                  HorizontalAlignment="Center"/>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Navigation Menu -->
        <Border Grid.Row="1" Grid.Column="0" Background="#F5F5F5" BorderBrush="#E0E0E0" BorderThickness="0,0,1,0">
            <StackPanel Margin="10">
                <Button Content="لوحة التحكم" 
                       Command="{Binding NavigateCommand}" 
                       CommandParameter="Dashboard"
                       Style="{StaticResource SecondaryButton}" 
                       Margin="0,5" 
                       HorizontalAlignment="Stretch"/>

                <Button Content="الخطوط" 
                       Command="{Binding NavigateCommand}" 
                       CommandParameter="Lines"
                       Style="{StaticResource SecondaryButton}" 
                       Margin="0,5" 
                       HorizontalAlignment="Stretch"/>

                <Button Content="التسليمات" 
                       Command="{Binding NavigateCommand}" 
                       CommandParameter="Assignments"
                       Style="{StaticResource SecondaryButton}" 
                       Margin="0,5" 
                       HorizontalAlignment="Stretch"/>

                <Button Content="المجموعات" 
                       Command="{Binding NavigateCommand}" 
                       CommandParameter="Groups"
                       Style="{StaticResource SecondaryButton}" 
                       Margin="0,5" 
                       HorizontalAlignment="Stretch"/>

                <Button Content="التقارير" 
                       Command="{Binding NavigateCommand}" 
                       CommandParameter="Reports"
                       Style="{StaticResource SecondaryButton}" 
                       Margin="0,5" 
                       HorizontalAlignment="Stretch"/>
                <Button Content="سجل التدقيق" Command="{Binding NavigateCommand}" CommandParameter="AuditTrail" 
                        Style="{StaticResource SecondaryButton}" 
                        Margin="0,5" 
                        HorizontalAlignment="Stretch"/>
                <Button Content="الإعدادات" Command="{Binding NavigateCommand}" CommandParameter="Settings" 
                        Style="{StaticResource SecondaryButton}" 
                        Margin="0,5" 
                        HorizontalAlignment="Stretch"/>
            </StackPanel>
        </Border>

        <!-- Content Area -->
        <Grid Grid.Row="1" Grid.Column="1" Margin="10">
            <ContentPresenter Content="{StaticResource DashboardView}"
                              Visibility="{Binding CurrentView, Converter={StaticResource ViewToVisibilityConverter}, ConverterParameter=Dashboard}"/>
            <ContentPresenter Content="{StaticResource LinesView}"
                              Visibility="{Binding CurrentView, Converter={StaticResource ViewToVisibilityConverter}, ConverterParameter=Lines}"/>
            <ContentPresenter Content="{StaticResource GroupsView}"
                              Visibility="{Binding CurrentView, Converter={StaticResource ViewToVisibilityConverter}, ConverterParameter=Groups}"/>
            <ContentPresenter Content="{StaticResource AssignmentsView}"
                              Visibility="{Binding CurrentView, Converter={StaticResource ViewToVisibilityConverter}, ConverterParameter=Assignments}"/>
            <ContentPresenter Content="{StaticResource ReportsView}"
                              Visibility="{Binding CurrentView, Converter={StaticResource ViewToVisibilityConverter}, ConverterParameter=Reports}"/>
            <ContentPresenter Content="{StaticResource AuditTrailView}"
                              Visibility="{Binding CurrentView, Converter={StaticResource ViewToVisibilityConverter}, ConverterParameter=AuditTrail}"/>
            <ContentPresenter Content="{StaticResource SettingsView}"
                              Visibility="{Binding CurrentView, Converter={StaticResource ViewToVisibilityConverter}, ConverterParameter=Settings}"/>
        </Grid>
    </Grid>
</Window>