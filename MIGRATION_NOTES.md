# ملاحظات التحديث - نظام إدارة المجموعات

## التغييرات التي تمت

### 1. النماذج (Models)
- ✅ **إنشاء نموذج Group جديد** مع جميع الخصائص المطلوبة:
  - أنواع المجموعات: بمحافظ كاش، بدون محافظ كاش، موقوفة، باريد
  - حد أقصى 50 خط لكل مجموعة
  - نظام تجديد الصلاحية (60 يوم)
  - تواريخ التسليم والاستلام
  - تنبيهات ذكية

- ✅ **تحديث نموذج Line** ليشمل:
  - GroupId بدلاً من CategoryId
  - اسم مرتبط (AssociatedName)
  - رقم قومي (NationalId)
  - معرف محفظة كاش (CashWalletId)

### 2. قاعدة البيانات
- ✅ **تحديث AppDbContext** مع:
  - إضافة DbSet<Group>
  - تحديث العلاقات بين Line و Group
  - إضافة Indexes للأداء الأفضل

### 3. ViewModels
- ✅ **إنشاء GroupsViewModel** كامل مع:
  - عمليات CRUD للمجموعات
  - تجديد الصلاحية
  - التصفية والبحث
  - عرض المجموعات حسب الشركة

- ✅ **تحديث MainViewModel** ليشمل:
  - التنقل للمجموعات حسب الشركة
  - عرض إحصائيات المجموعات
  - أوامر جديدة للشركات الأربعة

### 4. الخدمات (Services)
- ✅ **تحديث AlertService** مع:
  - تنبيهات صلاحية المجموعات (60 يوم)
  - تنبيهات التسليم للعملاء
  - دمج جميع التنبيهات في نظام واحد

### 5. الألوان والأنماط
- ✅ **إضافة ألوان الشركات الأربعة**:
  - فودافون: #E60000 (أحمر)
  - اتصالات: #008000 (أخضر)
  - وي: #8B008B (بنفسجي)
  - أورانج: #FF8C00 (برتقالي)

- ✅ **أنماط خاصة لكل شركة**:
  - أزرار ملونة (VodafoneButton, EtisalatButton, WEButton, OrangeButton)
  - بطاقات ملونة (VodafoneCard, EtisalatCard, WECard, OrangeCard)
  - أزرار أيقونات كبيرة للشاشة الرئيسية

### 6. شعارات الشركات
- ✅ **إضافة شعارات الشركات الأربعة**:
  - Resources/Images/vodafone_logo.png
  - Resources/Images/etisalat_logo.png
  - Resources/Images/we_logo.png
  - Resources/Images/orange_logo.png
- ✅ **تحديث قاعدة البيانات** لتضمين مسارات الشعارات

## العمل المتبقي

### ملفات تحتاج تحديث:
1. ⚠️ **ImportService.cs** - يستخدم CategoryId القديم (يحتاج تحديث ليعمل مع Groups)
2. ⚠️ **LinesViewModel.cs** - يستخدم CategoryId القديم (يحتاج تحديث ليعمل مع Groups)

### الواجهات (Views) التي تحتاج إنشاء/تحديث:
1. ❌ **MainWindow.xaml** - تحديث لعرض أيقونات الشركات الأربعة بدلاً من القائمة الجانبية
2. ❌ **GroupsView.xaml** - إنشاء واجهة عرض وإدارة المجموعات
3. ❌ **LinesView.xaml** - تحديث للعمل داخل المجموعات
4. ❌ **QRScannerView.xaml** - إنشاء واجهة إضافة خطوط بالـ QR Scanner
5. ❌ **DashboardView.xaml** - تحديث لعرض التنبيهات الجديدة

### مهام إضافية:
1. ❌ إنشاء Migration للتغييرات في قاعدة البيانات
2. ❌ تحديث ServiceLocator لتسجيل GroupsViewModel
3. ❌ اختبار النظام بالكامل

## ملاحظات مهمة

### للمطورين:
- هذا البرنامج **WPF** يتطلب **Windows** للتشغيل
- على Replit (Linux)، يمكن فقط **بناء المشروع** وليس تشغيله
- لتشغيل التطبيق، يجب تحميله على جهاز Windows

### بنية النظام الجديدة:
```
Operator (الشركة)
└── Groups (مجموعات)
    └── Lines (خطوط - حتى 50 خط لكل مجموعة)
```

### البنية القديمة (لم تعد مستخدمة):
```
Operator (الشركة)
└── Category (فئة)
    └── Lines (خطوط)
```

## خطوات التطوير التالية

1. **حذف أو تحديث** الملفات التي تستخدم النظام القديم (Category-based)
2. **إنشاء واجهات XAML** جديدة للنظام الجديد
3. **إنشاء Migration** لقاعدة البيانات
4. **اختبار كامل** على Windows
